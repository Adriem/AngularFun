// Generated by CoffeeScript 1.3.3

/*global module, require
*/


(function() {

  module.exports = function(grunt) {
    var coffeeLint, growl, path;
    coffeeLint = require('coffeelint');
    growl = require('growl');
    path = require('path');
    return grunt.registerMultiTask('coffeeLint', 'Lints CoffeeScript files', function() {
      var config, files, message, src;
      src = this.file.src;
      config = this.data;
      files = grunt.file.expandFiles(src);
      message = '';
      files.forEach(function(file, index) {
        var errors, fullPath, source;
        source = grunt.file.read(file);
        errors = coffeeLint.lint(source, config);
        if (!errors.length) {
          return;
        }
        fullPath = path.resolve(file);
        message += "" + fullPath + "\n";
        errors.forEach(function(error) {
          return message += "#" + error.lineNumber + ": " + error.message + "\n";
        });
        return message += '\n';
      });
      if (!message.length) {
        return;
      }
      grunt.log.writeln(message);
      return growl(message, {
        title: 'CoffeeScript Linting Failed'
      });
    });
  };

}).call(this);
