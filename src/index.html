<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" xmlns:ng="http://angularjs.org" xmlns:app="ignored"> <![endif]-->
<!--[if IE 7]> <html class="no-js lt-ie9 lt-ie8" xmlns:ng="http://angularjs.org" xmlns:app="ignored"> <![endif]-->
<!--[if IE 8]> <html class="no-js lt-ie9" xmlns:ng="http://angularjs.org" xmlns:app="ignored"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" xmlns:ng="http://angularjs.org" xmlns:app="ignored"> <!--<![endif]-->
	<head>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<title>Angular Fun</title>
		<meta name="description" content="AngularJS Reference Architecture" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />

		<% if (config.environment && config.environment === 'prod') { %>
			<!--[if lte IE 8]> <script src="<%= config.getHashedFile('./.temp/scripts/ie.min.js', {trim: './.temp'}) %>"></script> <![endif]-->

			<link rel="stylesheet" href="<%= config.getHashedFile('./.temp/styles/styles.min.css', {trim: './.temp'}) %>" />
		<% } else { %>
			<!--[if lte IE 8]> <script src="/scripts/libs/json3.js></script> <script src="/scripts/libs/html5shiv-printshiv.js"></script> <![endif]-->

			<link rel="stylesheet" href="/styles/styles.css" />
		<% } %>

		<!-- ClickJacking Defense begin (https://www.owasp.org/index.php/Clickjacking_Defense_Cheat_Sheet) -->
		<style id="antiClickjack">
			body {
				display: none !important;
			}
		</style>

		<script>
			(function (w) {
				if (w.top === w.self) {
					var a = w.document.getElementById('antiClickjack');

					a.parentNode.removeChild(a);
				} else {
					w.top.location = w.self.location;
				}
			}(window));
		</script>
		<!-- ClickJacking Defense end -->
	</head>
	<body ng-cloak class="ng-cloak">
		<div class="jumbotron">
			<div class="container">
				<h1>Playing with <a href="http://angularjs.org" target="_blank">AngularJS</a></h1>
				<p>and also <a href="http://requirejs.org/" target="_blank">RequireJS</a></p>
				<p>Dynamically loading dependencies in <b>dev</b>, but minimize the hell out of it for <b>prod</b>.</p>
				<p>RequireJS is only used for dev and build.</p>
			</div>
		</div>


		<div class="container">
			<div class="row">
				<div class="col-lg-8">
					<app:tabs>
						<app:tab caption="GitHub">
							<section ng-controller="gitHubController as controller">
								<div class="alert alert-info" ng-show="!controller.searchTerm.length">
									<h4 class="alert-heading">Heads up!</h4>
									<span>Enter GitHub search criteria.</span>
								</div>

								<form class="well form-search" ng-submit="controller.search(controller.searchTerm)">
									<input type="text" class="input-medium search-query" ng-model="controller.searchTerm" />
									<button type="submit" class="btn"><i class="glyphicon glyphicon-search"></i> Search</button>
								</form>

								<ul ng-hide="!controller.repos.data.length">
									<li ng-repeat="repo in controller.repos.data track by repo.id | orderBy:'pushed_at':true">
										<a ng-href="{{repo.url}}" ng-bind="repo.name" target="_blank"></a>
										<div ng-bind="repo.description"></div>
									</li>
								</ul>
							</section>
						</app:tab>
						<app:tab caption="People">
							<div class="row">
								<div class="col-lg-6">
									<section ng-controller="personController as controller">
										<div class="alert alert-error" ng-show="!!controller.error">
											<h4 class="alert-heading" ng-bind="controller.error.title"></h4>
											<span ng-bind="controller.error.message"></span>
										</div>

										<form class="well form-search" ng-submit="controller.insertPerson(controller.person)">
											<p>
												<span class="label label-info">Heads up!</span>
												<span class="text-info">Try adding a duplicate name.</span>
											</p>

											<input type="text" class="input-medium" ng-model="controller.person.name" placeholder="Name" />
											<input type="text" class="input-small" ng-model="controller.person.age" placeholder="Age" />
											<button type="submit" class="btn"><i class="glyphicon glyphicon-plus"></i> Add Person</button>
										</form>

										<ul ng-hide="!controller.people.length">
											<li class="row" ng-repeat="person in controller.people track by person.id | orderBy:'name'">
												<a ng-href="#/people/{{person.id}}" ng-bind="person.name"></a>
											</li>
										</ul>
									</section>
								</div>
								<div class="col-lg-2">
									<section ng-controller="personDetailsController as controller">
										<dl>
											<dt>Name</dt>
											<dd ng-bind="controller.person.name"></dd>
											<dt>Age</dt>
											<dd ng-bind="controller.person.age"></dd>
										</dl>
									</section>
								</div>
							</div>
						</app:tab>
					</app:tabs>
				</div>
				<div class="col-lg-4">
					<h2>Search History</h2>
					<section ng-controller="searchHistoryController as controller">
						<form class="well form-search">
							<input type="text" class="input-medium search-query" placeholder="Type filter..." ng-model="controller.query" />
							<label ng-bind-template="Displaying:  {{(controller.searchHistory | filter:controller.query).length}}"></label>
						</form>

						<ol ng-hide="!controller.searchHistory.length">
							<li class="slide" ng-repeat="item in controller.searchHistory | filter:controller.query | orderBy:'timeStamp':true">
								<div class="floatNone">
									{{item.source}}/{{item.criteria}}
								</div>
							</li>
						</ol>
					</section>
				</div>
			</div>
		</div>

		<% if (config.environment && config.environment === 'prod') { %>
			<script src="<%= config.getHashedFile('./.temp/scripts/scripts.min.js', {trim: './.temp'}) %>"></script>
		<% } else { %>
			<script data-main="/scripts/main.js" src="/scripts/libs/require.js"></script>
		<% } %>
	</body>
</html>